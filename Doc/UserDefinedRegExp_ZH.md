# 用户自定义正则表达式区块

作为文本自动格式化功能的一部分，Easy Typing 插件允许用户通过自定义正则表达式来定义特殊区块，并为这些区块设置特定的空格策略。

## 目的

1. 防止特定内容被格式化
2. 为特定格式的内容设置特殊的空格规则
3. 识别并保护特殊语法结构

## 语法

在自定义正则表达式的文本编辑区域，每一行字符串都为一个正则规则，其格式如下：

```
<正则表达式>|<左空格策略><右空格策略>
```

## 空格策略

三种空格策略分别用三个符号来表示：
- 不要求空格 (-)
- 软空格 (=)
- 严格空格 (+)

这些策略与主要自动格式化功能中不同区块的空格策略相一致。

## 示例

1. 识别 Obsidian 标签：
   ```
   #[\u4e00-\u9fa5\w\/]+|++
   ```
   这个规则会识别以 `#` 开头，后面跟着中文、字母、数字、下划线或斜杠的内容，并在其左右两侧要求严格空格。

2. 识别网络链接：
   ```
   (file:///|https?://|ftp://|obsidian://|zotero://|www.)[^\s（）《》。,，！？;；：""''\)\(\[\]\{\}']+|++
   ```
   这个规则会识别各种类型的链接，并在其左右两侧要求严格空格。

3. 识别 Obsidian callout 语法：
   ```
   \[\!.*?\][-+]{0,1}|-+
   ```
   这个规则会识别 callout 语法的头部，防止误格式化。

4. 识别双尖括号：
   ```
   <.*?>|--
   ```
   这个规则会识别双尖括号块，保证其内部文本不被自动格式化影响。

5. 识别数字时间：
   ```
   \d{2}:\d{1,2}|++
   ```
   这个规则会识别如 12:16 这样的时间文本，防止自动格式化导致空格的误添加。

## 使用方法

1. 在插件设置中找到自定义正则表达式部分
2. 按照上述语法添加你的正则表达式
3. 插件会在自动格式化过程中应用这些规则

## 注意事项

- 正则表达式的编写需要一定的基础知识
- 过于复杂或低效的正则表达式可能会影响插件性能
- 从 v5.5.0 版本开始，支持在自定义正则表达式区域使用注释行（以 // 开头）

关于文本自动格式化的更多信息，请参阅[文本自动格式化](./AutoFormatting_ZH.md)文档。

想要了解正则表达式的使用，可以查看 [《阮一峰：正则表达式简明教程》](https://javascript.ruanyifeng.com/stdlib/regexp.html#)
